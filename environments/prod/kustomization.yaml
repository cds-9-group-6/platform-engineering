apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: sasya-arogya-prod

namespace: sasya-arogya

resources:
  - ../../base/common
  - ../../components/engine/base
  - ../../components/ollama/base
  - ../../components/chromadb/base
  - ../../components/mlflow-tracking/base
  - ../../components/prescription/base
  - ../../components/mcp-insurance/base
  - ../../components/otel-collector/base
  - ../../components/prometheus/base
  - ../../components/grafana/base
  - patches/engine-session-storage-pvc-prod.yaml

commonLabels:
  environment: prod
  app.kubernetes.io/instance: sasya-arogya-prod

patchesStrategicMerge:
  - patches/engine-prod.yaml
  - patches/ollama-prod.yaml
  - patches/chromadb-prod.yaml
  - patches/mlflow-prod.yaml
  - patches/prescription-prod.yaml
  - patches/otel-collector-prod.yaml
  - patches/prometheus-prod.yaml
  - patches/grafana-prod.yaml

images:
  - name: quay.io/rajivranjan/engine
    newTag: amd64-v6.7
  - name: quay.io/rajivranjan/ollama-multi-model
    newTag: linux-amd64-v1.0
  - name: quay.io/rajivranjan/chromadb-with-data-amd64
    newTag: v1
  - name: quay.io/rajivranjan/mlflow-server
    newTag: amd64-v1
  - name: quay.io/rajivranjan/prescription
    newTag: amd64-v1.7
  - name: quay.io/rajivranjan/mcp-insurance
    newTag: v1.2.1
  - name: otel/opentelemetry-collector-contrib
    newTag: latest
  - name: prom/prometheus
    newTag: latest
  - name: grafana/grafana-oss
    newTag: latest
